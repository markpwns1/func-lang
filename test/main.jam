
-- love2D program that will print "seizure program seizure 
-- program" and toggle between showing and not showing a 
-- message every frame, and the message alternates between 
-- "seizure" and "program" each frame

import "preamble"

let next_message_table = {
    "seizure" = "program",
    "program" = "seizure"
}

let state = {
    .current_message = "seizure",
    .show_message = true
}

let love_draw = -> 
    -- table destructure
    let { .current_message, .show_message } = state in do
        print "seizure program seizure program",
        if show_message then
            love.graphics.print current_message 400 300
    then 
    overwrite state {
        -- if the message is being shown this frame, change it 
        -- by looking it up in the "next message table"
        .current_message = if show_message 
            then next_message_table # current_message 
            else current_message,
        .show_message = not show_message
    }

let main = -> overwrite love {
    .draw = love_draw
}
